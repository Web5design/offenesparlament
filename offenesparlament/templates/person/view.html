{% import "searches.html" as macros %}
{% import "snippets.html" as snippets %}
{% extends "layout.html" %}

{% block head %}
{% endblock %}

{% block title %}
  {{ person.name }}
{% endblock %}

{% block description %}
  {{ person.bio | truncate(150) }}
{% endblock %}

{% block content %}
  <br/>
  <div class="pull-right">
    {{ snippets.abo_link(person.fingerprint.strip()) }}
  </div>
  <h2 class="page-header">
    {{ person.name }}
    {% if person.partei %}
      ({{ person.partei }})
    {% endif %}
  </h2>
  <div class="row">
    <div class="span2">
      {% if person.foto_url %}
        <div class="person-foto">
          <img src="{{ person.foto_url }}">
          <p>{{ person.foto_copyright }}</p>
        </div>
      {% endif %}
    </div>

    <div class="span10">
      <ul class="rollen">
        {% for rolle in person.rollen %}
          <li><strong>{{ rolle.funktion }}</strong>
            {% if rolle.wahlkreis %}
            &mdash; {{rolle.wahlkreis.name}} (Wahlkreis {{rolle.wahlkreis.nummer}})
            {% endif %}  
            {% if rolle.ressort %}
              &mdash; {{rolle.ressort}}
            {% endif %}  
            {% if rolle.land %}
              &mdash; {{rolle.land}}
              {% endif %}  
            <sup><a href="{{ url_for('page', path='rollen')
                }}">falsch?</a></sup>
          </li>
        {% endfor %}
      </ul>
      {% if person.bio %}
      <hr>
      <span class="bio-teaser">{{person.bio | striptags |
        truncate(200) }} <a>Mehr...</a></span>
      <span class="bio-fulltext">
        {{person.bio | safe}}
      </span>
      {% endif %}
      <hr>
      <div>  
      {% for sw in schlagworte %}
        <a href="{{ url_for('ablauf.index', schlagworte=sw['schlagwort']) }}">
        {{sw['schlagwort']}}</a> 
        <span class="facet-count">({{sw['num']}})</span>{% if not loop.last %},{% endif %}
      {% endfor %}
      </div>
    </div>
  </div>
  <hr>

       <ul> 
        {% if person.awatch_url %}
          <li class='awatch-link'><a href="{{ person.awatch_url }}">
            <img  src="/static/img/awatch_small.png"> Abgeordnetenwatch</a></li>
        {% endif %}
        {% if person.beruf %}
          <li>Beruf: {{ person.beruf }}</li>
        {% endif %}
        {% if person.homepage_url %}
          <li><a href="{{ person.homepage_url }}">Homepage</a></li>
        {% endif %}
        {% if person.twitter_url %}
          <li><a href="{{ person.twitter_url }}">Twitter</a></li>
        {% endif %}
        {% if person.facebook_url %}
          <li><a href="{{ person.facebook_url }}">Facebook</a></li>
        {% endif %}
        {% if person.bio_url %}
          <li><a href="{{ person.bio_url }}">Bundestag</a></li>
        {% endif %}
        {% if person.stimmen[0] %}
          <li><strong><a href="{{ url_for('person.votes', slug=person.slug)
              }}">Abstimmungsverhalten</a></strong></li>
        {% endif %}
      </ul>

    {% if person.vorsitze[0] or person.stellv_vorsitze[0] or person.obleute[0] or person.mitglied[0] or person.stellvertreter[0] %}
      <h3>Gremien</h3>
      <ul>
        {% if person.vorsitze[0] %}
        <li>Vorsitz
        <ul>
          {% for g in person.vorsitze %}
            <li>{{ g.name }}</li>
          {% endfor %}
        </ul>
        </li>
        {% endif %}
        {% if person.stellv_vorsitze[0] %}
        <li>Stellvertretung
        <ul>
          {% for g in person.stellv_vorsitze %}
            <li>{{ g.name }}</li>
          {% endfor %}
        </ul>
        </li>
        {% endif %}
        {% if person.obleute[0] %}
        <li>ObmannIn
        <ul>
          {% for g in person.obleute %}
            <li>{{ g.name }}</li>
          {% endfor %}
        </ul>
        </li>
        {% endif %}
        {% if person.mitglied[0] %}
        <li>Mitgliedschaften
        <ul>
          {% for g in person.mitglied %}
            <li>{{ g.name }}</li>
          {% endfor %}
        </ul>
        </li>
        {% endif %}
        {% if person.stellvertreter[0] %}
        <li>Stellvertretung
        <ul>
          {% for g in person.stellvertreter %}
            <li>{{ g.name }}</li>
          {% endfor %}
        </ul>
        </li>
        {% endif %}
      </ul>
    {% endif %}
    {% if debatten[0] %}
      <h3>Beiträge im Plenum</h3>
      <ul>
        {% for debatte in debatten %}
          <li><a href="{{ url_for('debatte.view', wahlperiode=debatte.sitzung.wahlperiode, nummer=debatte.sitzung.nummer, debatte=debatte.nummer) }}">
            {{ debatte.sitzung.date.strftime('%d.%m.%Y') }}: 
            {{ debatte.titel }}</a></li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
  <div class="mainbar">
    {% if not pager.count() %}
      <p class="hint">
        Zu diesem Akteur liegen keine parlamentarischen Abläufe vor.
      </p>
    {% endif %}
    <ul class="position-list">
      {% for position in pager %}
        <li class="position">
          <span class="header">
            <span class="date">
              {{position.date.strftime("%d.%m.%Y")}}</span>
            <span class="zuordnung">{{position.zuordnung}}</span>
            <span class="typ">{{position.typ}}</span>
          </span>
          <span class="ablauf">
            <h4><a href="{{ url_for('ablauf.view',
                                    wahlperiode=position.ablauf.wahlperiode,
                                    key=position.ablauf.key) }}#{{position.key}}">
                {{position.ablauf.titel}}</a></h4>
          </span>
          <span class="bottom">
            {% if position.ablauf.initiative %}
              {{position.ablauf.initiative }} &mdash; 
            {% endif %}
            {{position.ablauf.typ}}
            {% if position.dokument %}
              &mdash;
              <a href="{{position.dokument.link}}">{{ position.dokument.name }}</a>
            {% endif %}
          </span>
        </li>
      {% endfor %}
    </ul>
    {{ macros.pager(pager) }}
  </div>
  <div class="clearfix"></div>
  <hr/>
  <p class="hint"><strong>Hinweis:</strong> Die vom Bundestag bereit gestellten Informationen zu
  den Nebeneinkünften Abgeordneter geben <a
    href="http://blog.abgeordnetenwatch.de/2011/06/07/union-und-fdp-kein-bedarf-an-kompletter-offenlegung-von-nebeneinkunften/">keinen
    klaren Aufschluss</a> über
  das zusätzliche Einkommen und werden daher auf dieser Seite nicht dargestellt.</p>
{% endblock %}


